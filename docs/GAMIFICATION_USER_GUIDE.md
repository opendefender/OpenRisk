# ðŸŽ® Guide d'Utilisation - Gamification UI

## AccÃ©der Ã  Your Gamification Profile

### Chemin Utilisateur
```
Navigation Sidebar
  â””â”€â”€ âš™ï¸ Settings
      â””â”€â”€ General Tab
          â””â”€â”€ ðŸŽ® Your Gamification Profile (NEW!)
```

### Visuellement
1. Cliquez sur **âš™ï¸ Settings** dans la sidebar
2. Assurez-vous que l'onglet **General** est sÃ©lectionnÃ©
3. Scrollez vers le bas, vous verrez **"ðŸŽ® Your Gamification Profile"**

---

## Composants AffichÃ©s

### 1ï¸âƒ£ Level Card (Cercle Principal)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Level Card Premium             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚                           â”‚      â”‚
â”‚  â”‚       Circle Badge        â”‚      â”‚
â”‚  â”‚         Level 2           â”‚      â”‚
â”‚  â”‚                           â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚      (Gradient dynamique)           â”‚
â”‚                                     â”‚
â”‚  Progression XP                     â”‚
â”‚  150 / 400 XP                       â”‚
â”‚  â–°â–°â–°â–°â–°â–¯â–¯â–¯â–¯â–¯ 37.5%                   â”‚
â”‚  Vers niveau 3                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Couleurs par Niveau**:
- Niveau 1: ðŸŸ¢ Green â†’ Teal
- Niveau 2: ðŸ”µ Blue â†’ Cyan
- Niveau 3: ðŸŸ£ Purple â†’ Indigo
- Niveau 4: ðŸ©· Pink â†’ Rose
- Niveau 5+: ðŸŸ  Orange â†’ Red

### 2ï¸âƒ£ Achievement Stats (Compteurs)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5               â”‚      3        â”‚
â”‚  Risques GÃ©rÃ©s   â”‚  AttÃ©nuations â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3ï¸âƒ£ Badges Section
```
Badges DÃ©bloquÃ©s (4)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â˜…      â”‚  â”‚  â˜…      â”‚  â”‚  â—‡      â”‚  â”‚  â—‡      â”‚
â”‚ Flag    â”‚  â”‚ Shield  â”‚  â”‚ Brain   â”‚  â”‚ Crown   â”‚
â”‚Initiatorâ”‚  â”‚Guardian â”‚  â”‚Strategistâ”‚ â”‚ Legend  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â˜… = DÃ©verrouillÃ© (Couleur jaune/or)
â—‡ = VerrouillÃ© (Couleur grise)

Hover sur badge â†’ Affiche description
```

---

## SystÃ¨me de Badges

### Les 4 Badges

| Badge | Nom | Description | Condition |
|-------|-----|-------------|-----------|
| ðŸš© | **Initiator** | CrÃ©er votre premier risque | 1+ risque crÃ©Ã© |
| ðŸ›¡ï¸ | **Guardian** | AttÃ©nuer 5 risques | 5+ mitigations complÃ©tÃ©es |
| ðŸ§  | **Strategist** | GÃ©rer plus de 10 risques | 10+ risques gÃ©rÃ©s |
| ðŸ‘‘ | **Legend** | Atteindre 1000 XP | 1000 XP ou plus |

### Comment DÃ©bloquer les Badges

```
INITIATOR (DÃ©marrage)
â””â”€ Action: CrÃ©er votre 1er risque
   ðŸŽ¯ Dashboard > "+ New Risk"
   âœ“ Remplir titre + description
   âœ“ SÃ©lectionner assets (optionnel)
   âœ“ Valider

GUARDIAN (Protection)
â””â”€ Action: ComplÃ©ter 5 mitigations
   ðŸŽ¯ Ajouter mitigation Ã  risque
   âœ“ DÃ©tails du risque > "+ Add Mitigation"
   âœ“ Cocher "DONE" quand terminÃ©e
   Ã— 5 fois = Badge!

STRATEGIST (StratÃ©gie)
â””â”€ Action: GÃ©rer 10+ risques
   ðŸŽ¯ CrÃ©er progressivement
   ðŸ“Š Dashboard affiche votre compte

LEGEND (MaÃ®trise)
â””â”€ Action: Accumuler 1000 XP
   ðŸ“ˆ +10 XP par risque crÃ©Ã©
   ðŸ“ˆ +50 XP par mitigation complÃ©tÃ©e
   ðŸŽ¯ (~20 risques + 10 mitigations)
```

---

## XP & SystÃ¨me de Progression

### Formule de Calcul

```
XP = (Nombre Risques Ã— 10) + (Mitigations ComplÃ©tÃ©es Ã— 50)

Exemple:
- 5 risques crÃ©Ã©s      = 50 XP
- 3 mitigations faites = 150 XP
- TOTAL               = 200 XP â†’ Niveau 2
```

### Progression de Niveau

```
Niveau 1: 0-99 XP        (Base)
Niveau 2: 100-399 XP     (IntermÃ©diaire)
Niveau 3: 400-899 XP     (AvancÃ©)
Niveau 4: 900-1599 XP    (Expert)
Niveau 5: 1600+ XP       (MaÃ®tre)

Formule: Level = âˆš(XP/100) + 1
```

### Barre de Progression

La barre affiche votre progression vers le niveau suivant:

```
Exemple: Niveau 2, 150/400 XP

[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 37.5%
```

---

## Interactions Utilisateur

### Animations

1. **Chargement Initial**
   - Skeleton loader animÃ©
   - DurÃ©e: ~1 seconde

2. **Barre XP**
   - AnimÃ©e au montage (0 â†’ X%)
   - DurÃ©e: 0.8 secondes
   - Easing: easeOut

3. **Badges**
   - Apparaissent en cascade (dÃ©calÃ©)
   - Chaque badge: dÃ©lai + 0.1s
   - Glow effect si dÃ©verrouillÃ©

4. **Level Circle**
   - Pop animation (scale)
   - Spring physics

### Hover Effects

```
Hover sur un Badge:
  â€¢ Border s'illumine (couleur niveau)
  â€¢ Tooltip apparaÃ®t (description)
  â€¢ LÃ©gÃ¨re animation scale

Hover sur compteur stats:
  â€¢ Background s'Ã©claircie
  â€¢ Cursor devient pointer
```

### Ã‰tats AffichÃ©s

```
âœ… SUCCESS (Chargement ok)
   â†’ Affiche tous les Ã©lÃ©ments

â³ LOADING
   â†’ Skeleton placeholder
   â†’ Spinner (implicite via animate-pulse)

âŒ ERROR
   â†’ Icon AlertCircle rouge
   â†’ Message d'erreur lisible
   â†’ Bouton retry (manual F5)
```

---

## Exemples de ScÃ©narios

### ScÃ©nario 1: Utilisateur Nouveau

```
1. Premier login
2. Va Ã  Settings > General
3. Voit: "Vous avez 0 risques, 0 mitigations"
4. Level 1, 0 XP, 0% progression
5. 0 badges dÃ©verrouillÃ©s
6. â†’ Invite Ã  crÃ©er son 1er risque
```

**Action**: Retour Dashboard > "+ New Risk"

---

### ScÃ©nario 2: Utilisateur Actif

```
1. 15 risques crÃ©Ã©s, 8 mitigations complÃ©tÃ©es
2. XP = (15Ã—10) + (8Ã—50) = 550 XP
3. Level = âˆš(550/100) + 1 â‰ˆ Level 3
4. Progression vers Level 4: 550/900 = 61%
5. Badges:
   âœ“ Initiator (1+ risque)
   âœ“ Guardian (8 mitigations)
   âœ“ Strategist (15 risques)
   â—‡ Legend (besoin 1000 XP)
```

**Prochaine Ã©tape**: 450 XP manquants pour Legend

---

### ScÃ©nario 3: User ComplÃ¨te une Mitigation

```
AVANT:
â””â”€ 10 risques, 4 mitigations, Level 1, 300 XP

ACTION: ComplÃ©ter 1 mitigation

APRÃˆS (aprÃ¨s refresh):
â””â”€ 10 risques, 5 mitigations, Level 2, 350 XP
   âœ“ Guardian badge dÃ©verrouille! ðŸŽ‰
   â””â”€ Toast notification: "Guardian Badge Unlocked!"
```

---

## Refresh & Mise Ã  Jour

### Auto-Refresh
- âŒ Pas d'auto-refresh actuellement
- âœ… Refresh manuel: F5 ou Reload Page

### Mise Ã  Jour aprÃ¨s Action
1. CrÃ©er risque â†’ Dashboard retour
2. Statut ne s'update pas automatiquement
3. **Solution**: Aller Settings > General (fetch effectuÃ©)
4. Ou: F5 pour refresh complet

### Prochainement (Backlog)
- ðŸ”„ WebSocket events pour live update
- ðŸ”” Toast "XP Earned +10" quand risque crÃ©Ã©
- ðŸ“Š Real-time stats refresh

---

## Troubleshooting

### "Impossible de charger les statistiques"

**Causes Possibles**:
1. JWT Token expirÃ©
   â†’ Solution: Logout > Reconnexion
2. Backend non accessible
   â†’ Solution: VÃ©rifier docker-compose up
3. Mauvais CORS
   â†’ Solution: VÃ©rifier allowOrigins dans main.go

**VÃ©rifier**:
```bash
# Terminal 1: Backend
docker-compose up

# Terminal 2: VÃ©rifier API
curl -H "Authorization: Bearer YOUR_JWT" \
  http://localhost:8080/api/v1/gamification/me
```

---

### Badges ne s'affichent pas

**Cause**: Icons non mappÃ©es (backend retourne icon name non gÃ©rÃ©)

**Solution**: Ajouter le mapping dans `getBadgeIcon()`:
```typescript
const icons: Record<string, React.ReactNode> = {
  Flag: <Target className="w-5 h-5" />,
  // Ajouter ici si besoin:
  NewIcon: <NewIconComponent className="w-5 h-5" />,
};
```

---

### XP ne s'update pas aprÃ¨s crÃ©ation risque

**Cause**: Pas d'auto-refresh

**Solution ImmÃ©diate**:
- Appuyez sur F5
- Ou: Allez Settings > General (trigger fetch)

**Solution Future**: ImplÃ©mentation WebSocket

---

## RÃ¨gles et Contraintes

### RÃ¨gles de Gamification

1. **XP**
   - S'accumule, ne diminue jamais
   - +10 XP par risque crÃ©Ã©
   - +50 XP par mitigation complÃ©tÃ©e
   - Seul l'utilisateur voit ses stats

2. **Level**
   - BasÃ© sur XP total
   - Formule quadratique
   - Max visible: 5+ (peut dÃ©passer)

3. **Badges**
   - Une fois dÃ©verrouillÃ©s, ne peuvent pas Ãªtre perdus
   - Conditions permanentes

4. **Privacy**
   - Chaque user ne voit que ses stats
   - Pas de leaderboard publique (futur)

---

## IntÃ©gration avec Workflow

### Flux Typique de Travail

```
1. LOGIN
   â””â”€ Directed to Dashboard

2. CREATE RISK (Dashboard)
   â””â”€ "+10 XP"
   â””â”€ Stats mises Ã  jour (aprÃ¨s refresh)

3. ADD MITIGATION (Risk Details)
   â””â”€ Statut = "DONE"
   â””â”€ "+50 XP"

4. CHECK PROGRESS (Settings > General)
   â””â”€ Voir progression XP
   â””â”€ Voir badges dÃ©verrouillÃ©s
   â””â”€ Motivation pour continuer

5. REPEAT
   â””â”€ Plus on gÃ¨re de risques
   â””â”€ Plus on monte de niveau
   â””â”€ Plus on dÃ©verrouille de badges
```

---

## Support & Contacte

- ðŸ“§ **Backend Issues**: VÃ©rifier `gamification_handler.go`
- ðŸŽ¨ **Frontend Issues**: VÃ©rifier `UserLevelCard.tsx`
- ðŸ“Š **Data Issues**: VÃ©rifier `gamification_service.go`
- ðŸ“š **Docs**: Voir `GAMIFICATION_IMPLEMENTATION.md`
- âœ… **Checklist**: Voir `VALIDATION_CHECKLIST.md`

---

**Version**: 1.0.0  
**DerniÃ¨re Mise Ã  Jour**: 01 DÃ©cembre 2025  
**Statut**: Production Ready âœ…
